{
  "hash": "04853a80aecdd7d5ebb867afbd0d0fbc",
  "result": {
    "markdown": "---\ntitle: \"Tidyverse\"\nauthor: \"Sadi Tomtulu\"\n---\n\n\n# Data Science at TUHH ------------------------------------------------------\n# SALES ANALYSIS ----\n\n# 1.0 Load libraries ----\n\n\n::: {.cell hash='01_tidyverse_challange_cache/html/unnamed-chunk-1_ab20600495c9d546fc18ac5df574511f'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'tidyverse' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'ggplot2' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'tibble' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'tidyr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'readr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'purrr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'dplyr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'stringr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'forcats' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'lubridate' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n#> ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#> ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#> ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#> ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#> ✔ purrr     1.0.1     \n#> ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n#> ✖ dplyr::filter() masks stats::filter()\n#> ✖ dplyr::lag()    masks stats::lag()\n#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(readxl)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'readxl' was built under R version 4.2.3\n```\n:::\n\n```{.r .cell-code}\nlibrary(lubridate)\n```\n:::\n\n\n# 2.0 Importing Files ----\n\n\n::: {.cell hash='01_tidyverse_challange_cache/html/unnamed-chunk-2_2e91d300dc59f7dca58bf7fa69c378c0'}\n\n```{.r .cell-code}\nbikes <- read_excel(path = \"C:/Users/sedit/Desktop/SadiR/ss23-bdsb-Sadtom98/content/01_journal/01_tidyverse_files/Bikes/01_bike_sales/01_raw_data/bikes.xlsx\")\n\n\nbikeshops <- read_excel(path = \"C:/Users/sedit/Desktop/SadiR/ss23-bdsb-Sadtom98/content/01_journal/01_tidyverse_files/Bikes/01_bike_sales/01_raw_data/bikeshops.xlsx\")\n\n\norderlines <- read_excel(\"C:/Users/sedit/Desktop/SadiR/ss23-bdsb-Sadtom98/content/01_journal/01_tidyverse_files/Bikes/01_bike_sales/01_raw_data/orderlines.xlsx\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> New names:\n#> • `` -> `...1`\n```\n:::\n:::\n\n\n# 3.0 Examining Data ----\n\n\n::: {.cell hash='01_tidyverse_challange_cache/html/unnamed-chunk-3_7a9f07ac60e236ac9735d48fa0c8dc4e'}\n\n```{.r .cell-code}\nglimpse(orderlines)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Rows: 15,644\n#> Columns: 7\n#> $ ...1        <chr> \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"…\n#> $ order.id    <dbl> 1, 1, 2, 2, 3, 3, 3, 3, 3, 4, 5, 5, 5, 5, 6, 6, 6, 6, 7, 7…\n#> $ order.line  <dbl> 1, 2, 1, 2, 1, 2, 3, 4, 5, 1, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2…\n#> $ order.date  <dttm> 2015-01-07, 2015-01-07, 2015-01-10, 2015-01-10, 2015-01-1…\n#> $ customer.id <dbl> 2, 2, 10, 10, 6, 6, 6, 6, 6, 22, 8, 8, 8, 8, 16, 16, 16, 1…\n#> $ product.id  <dbl> 2681, 2411, 2629, 2137, 2367, 1973, 2422, 2655, 2247, 2408…\n#> $ quantity    <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1…\n```\n:::\n:::\n\n\n# 4.0 Joining Data ----\n\n\n::: {.cell hash='01_tidyverse_challange_cache/html/unnamed-chunk-4_ced6f48e0e5a3bc5c1215563a4410468'}\n\n```{.r .cell-code}\nbike_orderlines <- left_join(orderlines, bikes, by = c(\"product.id\" = \"bike.id\")) %>% left_join(bikeshops, by = c(\"customer.id\" = \"bikeshop.id\"))\n```\n:::\n\n\n# 5.0 Wrangling Data ----\n\n\n::: {.cell hash='01_tidyverse_challange_cache/html/unnamed-chunk-5_ea62892f616c8a6551d91d9a7d2326a1'}\n\n```{.r .cell-code}\nbike_orderlines_wrangled <- bike_orderlines %>%\n  separate(col    = location,\n           into   = c(\"City\", \"State\"), sep = \",\") %>% mutate(total.price = price * quantity) %>%\nset_names(names(.) %>% str_replace_all(\"\\\\.\", \"_\"))\n```\n:::\n\n\n# 6.0 Business Insights ----\n# 6.1 Sales by State ----\n\n\n\n\n::: {.cell hash='01_tidyverse_challange_cache/html/unnamed-chunk-6_2195fc72d7f7eeb2e242fc173a07f44e'}\n\n```{.r .cell-code}\nsales_by_state <- bike_orderlines_wrangled %>%\n \n  # Select columns\n  select(order_date, total_price, State) %>%\n\n  # Add year column\n  mutate(year = year(order_date)) %>%\n \n  # Grouping by year and summarizing sales\n  group_by(State) %>% \n  summarize(sales = sum(total_price)) %>%\n \n  # Optional: Add a column that turns the numbers into a currency format \n  # (makes it in the plot optically more appealing)\n  # mutate(sales_text = scales::dollar(sales)) <- Works for dollar values\n  mutate(state_text = scales::dollar(sales, big.mark = \".\", \n                                     decimal.mark = \",\", \n                                     prefix = \"\", \n                                     suffix = \" €\"))\n\nsales_by_state\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"sales\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"state_text\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Baden-Württemberg\",\"2\":\"6521090\",\"3\":\"6.521.090 €\"},{\"1\":\"Bavaria\",\"2\":\"6742819\",\"3\":\"6.742.819 €\"},{\"1\":\"Berlin\",\"2\":\"1128433\",\"3\":\"1.128.433 €\"},{\"1\":\"Bremen\",\"2\":\"10653499\",\"3\":\"10.653.499 €\"},{\"1\":\"Hamburg\",\"2\":\"3874756\",\"3\":\"3.874.756 €\"},{\"1\":\"Hesse\",\"2\":\"1558901\",\"3\":\"1.558.901 €\"},{\"1\":\"Lower Saxony\",\"2\":\"4107115\",\"3\":\"4.107.115 €\"},{\"1\":\"Mecklenburg-Western Pomerania\",\"2\":\"618974\",\"3\":\"618.974 €\"},{\"1\":\"North Rhine-Westphalia\",\"2\":\"21200613\",\"3\":\"21.200.613 €\"},{\"1\":\"Saxony\",\"2\":\"2230245\",\"3\":\"2.230.245 €\"},{\"1\":\"Saxony-Anhalt\",\"2\":\"569614\",\"3\":\"569.614 €\"},{\"1\":\"Schleswig-Holstein\",\"2\":\"3224749\",\"3\":\"3.224.749 €\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n# Step 1 - Manipulate\n\n# Step 2 - Visualize\n\n\n\n::: {.cell hash='01_tidyverse_challange_cache/html/unnamed-chunk-7_00a679965955398f97e0df552709a0d2'}\n\n```{.r .cell-code}\nsales_by_state %>%\nggplot(aes(x = State, y = sales, fill = State)) +\n\n  # Geometries\n  geom_col()\n```\n\n::: {.cell-output-display}\n![](01_tidyverse_challange_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n# 6.2 Sales by Year and State ----\n\n# Step 1 - Manipulate\n\n# Step 2 - Visualize\n\n\n\n# 7.0 Writing Files ----\n\n# 7.1 Excel ----\n\n# 7.2 CSV ----\n\n# 7.3 RDS ----\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}