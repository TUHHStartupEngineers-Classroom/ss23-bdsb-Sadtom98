{
  "hash": "3eb225f6efa453ecf7e80fe7ffb0bfde",
  "result": {
    "markdown": "---\ntitle: \"Data Visualization\"\nauthor: \"Sadi Tomtulu\"\n---\n\n\n# Data Visualization\n\n# Libraries\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-1_f0078d670766341411a262b0b2323db3'}\n\n```{.r .cell-code}\nlibrary(scales)\nlibrary(tidyverse)\nlibrary(lubridate)\n```\n:::\n\n\n# Examples\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-2_36778bad69583aa86c0ab903bb1036ae'}\n\n```{.r .cell-code}\ndollar(100, prefix = \"\", suffix = \" €\",\n          big.mark = \".\", decimal.mark = \",\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] \"100 €\"\n```\n:::\n\n```{.r .cell-code}\nbike_orderlines_tbl <- read_rds(\"C:/Users/sedit/Desktop/SadiR/ss23-bdsb-Sadtom98/content/01_journal/01_tidyverse_files/Bikes/01_bike_sales/02_wrangled_data/bike_orderlines.rds\")\n\nsales_by_year_tbl <- bike_orderlines_tbl %>%\n\n  # Selecting columns to focus on and adding a year column\n  select(order_date, total_price) %>%\n  mutate(year = year(order_date)) %>%\n\n  # Grouping by year, and summarizing sales\n  group_by(year) %>%\n  summarize(sales = sum(total_price)) %>%\n  ungroup() %>%\n\n  # € Format Text\n  mutate(sales_text = scales::dollar(sales, \n                                     big.mark     = \".\", \n                                     decimal.mark = \",\", \n                                     prefix       = \"\", \n                                     suffix       = \" €\"))\nsales_by_year_tbl %>% ggplot(aes(x = year, y = sales, color = sales)) +\n  geom_line(linewidth = 1) +\n  geom_point(aes(size = sales)) +\n  geom_smooth(method = \"lm\", se = FALSE)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following aesthetics were dropped during statistical transformation: colour\n#> ℹ This can happen when ggplot fails to infer the correct grouping structure in\n#>   the data.\n#> ℹ Did you forget to specify a `group` aesthetic or to convert a numerical\n#>   variable into a factor?\n```\n:::\n\n::: {.cell-output-display}\n![](04_data_visualization_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\nsales_by_year_category_1_tbl <- bike_orderlines_tbl %>%\n    separate(col  = category,\n           into = c(\"category_1\", \"category_2\", \"category_3\"),\n           sep  = \" - \", remove = FALSE) %>%\n    select(order_date, category_1, total_price) %>%\n\n    mutate(order_date = ymd(order_date)) %>%\n    mutate(year = year(order_date)) %>%\n\n    group_by(category_1, year) %>%\n    summarize(revenue = sum(total_price)) %>%\n    ungroup() %>%\n\n    # Convert character vectors to factors\n    # Arrange by year and revenue\n    mutate(category_1 = fct_reorder2(category_1, year, revenue))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `summarise()` has grouped output by 'category_1'. You can override using the\n#> `.groups` argument.\n```\n:::\n\n```{.r .cell-code}\nsales_by_year_category_1_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"category_1\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"year\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"revenue\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"E-Bikes\",\"2\":\"2015\",\"3\":\"1599048\"},{\"1\":\"E-Bikes\",\"2\":\"2016\",\"3\":\"1916469\"},{\"1\":\"E-Bikes\",\"2\":\"2017\",\"3\":\"2617352\"},{\"1\":\"E-Bikes\",\"2\":\"2018\",\"3\":\"2151550\"},{\"1\":\"E-Bikes\",\"2\":\"2019\",\"3\":\"2667921\"},{\"1\":\"Gravel\",\"2\":\"2015\",\"3\":\"663025\"},{\"1\":\"Gravel\",\"2\":\"2016\",\"3\":\"768794\"},{\"1\":\"Gravel\",\"2\":\"2017\",\"3\":\"1006839\"},{\"1\":\"Gravel\",\"2\":\"2018\",\"3\":\"792234\"},{\"1\":\"Gravel\",\"2\":\"2019\",\"3\":\"1169038\"},{\"1\":\"Hybrid / City\",\"2\":\"2015\",\"3\":\"502512\"},{\"1\":\"Hybrid / City\",\"2\":\"2016\",\"3\":\"512346\"},{\"1\":\"Hybrid / City\",\"2\":\"2017\",\"3\":\"784491\"},{\"1\":\"Hybrid / City\",\"2\":\"2018\",\"3\":\"576805\"},{\"1\":\"Hybrid / City\",\"2\":\"2019\",\"3\":\"617064\"},{\"1\":\"Mountain\",\"2\":\"2015\",\"3\":\"3254289\"},{\"1\":\"Mountain\",\"2\":\"2016\",\"3\":\"3288733\"},{\"1\":\"Mountain\",\"2\":\"2017\",\"3\":\"4482867\"},{\"1\":\"Mountain\",\"2\":\"2018\",\"3\":\"4090277\"},{\"1\":\"Mountain\",\"2\":\"2019\",\"3\":\"4674327\"},{\"1\":\"Road\",\"2\":\"2015\",\"3\":\"3911408\"},{\"1\":\"Road\",\"2\":\"2016\",\"3\":\"4244165\"},{\"1\":\"Road\",\"2\":\"2017\",\"3\":\"5618742\"},{\"1\":\"Road\",\"2\":\"2018\",\"3\":\"4630987\"},{\"1\":\"Road\",\"2\":\"2019\",\"3\":\"5889525\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n# Challange 1\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-3_d5754888d85b78df1a027bb2c5538742'}\n\n```{.r .cell-code}\ncovid_data_tbl <- read_csv(\"https://covid.ourworldindata.org/data/owid-covid-data.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Rows: 313070 Columns: 67\n#> ── Column specification ────────────────────────────────────────────────────────\n#> Delimiter: \",\"\n#> chr   (4): iso_code, continent, location, tests_units\n#> dbl  (62): total_cases, new_cases, new_cases_smoothed, total_deaths, new_dea...\n#> date  (1): date\n#> \n#> ℹ Use `spec()` to retrieve the full column specification for this data.\n#> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\ncase_data <- covid_data_tbl %>% filter(location%in% c(\"France\", \"Germany\", \"Spain\", \"United Kingdom\", \"United States\"))\n\ncase_data %>% ggplot(aes(x = date, y = total_cases, color = location, position = \"bottom\")) + geom_smooth() + labs(title = \"COVID 19 confirmed cases\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = \"cs\")'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: Removed 76 rows containing non-finite values (`stat_smooth()`).\n```\n:::\n\n::: {.cell-output-display}\n![](04_data_visualization_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n# Challange 2\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-4_475e060f539cb662be1b944ea747834d'}\n\n```{.r .cell-code}\nworld <- map_data(\"world\")\n\nworldwide_mortality <- covid_data_tbl %>%\n  select(location, date, total_deaths, population) %>%\n  drop_na(location) %>%\n  mutate(location = case_when(\n    location == \"United Kingdom\" ~ \"UK\",\n    location == \"United States\" ~ \"USA\",\n    location == \"Democratic Republic of Congo\" ~ \"Democratic Republic of the Congo\",\n    TRUE ~ location )) %>% \n  distinct() %>%\n  group_by(location) %>% \n  filter(date == max(date)) %>%\n  mutate(death_rate = total_deaths / population) %>%\n  rename(region = location) %>%\n  left_join(world, by = \"region\")\n\nworldwide_mortality %>% ggplot(aes(x = long, y = lat)) + \n  geom_polygon(aes(group = group, fill = death_rate)) +\n  labs(\n    title = \"Mortality Rate Around the World (deaths / population)\",\n    fill = \"Mortality Rate\"\n  ) +\n  theme(axis.line = element_blank(), axis.text = element_blank(),\n        axis.ticks = element_blank(), axis.title = element_blank())\n```\n\n::: {.cell-output-display}\n![](04_data_visualization_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}