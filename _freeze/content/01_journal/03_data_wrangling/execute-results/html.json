{
  "hash": "6281fa99345721730c79bb8496a52dea",
  "result": {
    "markdown": "---\ntitle: \"Data Wrangling\"\nauthor: \"Sadi Tomtulu\"\n---\n\n\n# Data Wrangling\n\n# Challange\n\n# Libraries and data extraction\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-1_c2c1ff57f7f4b253d3ca9c0f2930a145'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'tidyverse' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'ggplot2' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'tibble' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'tidyr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'readr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'purrr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'dplyr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'stringr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'forcats' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'lubridate' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n#> ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#> ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#> ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#> ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#> ✔ purrr     1.0.1     \n#> ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n#> ✖ dplyr::filter() masks stats::filter()\n#> ✖ dplyr::lag()    masks stats::lag()\n#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(vroom)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'vroom' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'vroom'\n#> \n#> The following objects are masked from 'package:readr':\n#> \n#>     as.col_spec, col_character, col_date, col_datetime, col_double,\n#>     col_factor, col_guess, col_integer, col_logical, col_number,\n#>     col_skip, col_time, cols, cols_condense, cols_only, date_names,\n#>     date_names_lang, date_names_langs, default_locale, fwf_cols,\n#>     fwf_empty, fwf_positions, fwf_widths, locale, output_column,\n#>     problems, spec\n```\n:::\n\n```{.r .cell-code}\n# Data Table\nlibrary(data.table)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'data.table'\n#> \n#> The following objects are masked from 'package:lubridate':\n#> \n#>     hour, isoweek, mday, minute, month, quarter, second, wday, week,\n#>     yday, year\n#> \n#> The following objects are masked from 'package:dplyr':\n#> \n#>     between, first, last\n#> \n#> The following object is masked from 'package:purrr':\n#> \n#>     transpose\n```\n:::\n\n```{.r .cell-code}\n# Counter\nlibrary(tictoc)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'tictoc' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'tictoc'\n#> \n#> The following object is masked from 'package:data.table':\n#> \n#>     shift\n```\n:::\n\n```{.r .cell-code}\ncol_types <- list(\n  id = col_character(),\n  type = col_character(),\n  number = col_character(),\n  country = col_character(),\n  date = col_date(\"%Y-%m-%d\"),\n  abstract = col_character(),\n  title = col_character(),\n  kind = col_character(),\n  num_claims = col_double(),\n  filename = col_character(),\n  withdrawn = col_double()\n)\n\npatent_tbl <- vroom(\n            file       = \"C:/Users/sedit/Desktop/SadiR/ss23-bdsb-Sadtom98/content/01_journal/03_data_wrangling_/patent.tsv\", \n            delim      = \"\\t\", \n            col_types  = col_types,\n            na         = c(\"\", \"NA\", \"NULL\")\n        )\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: type, number,\n#> country, abstract, title, kind, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\npatent_asignee_tbl <- vroom(\n            file       = \"C:/Users/sedit/Desktop/SadiR/ss23-bdsb-Sadtom98/content/01_journal/03_data_wrangling_/patent_assignee.tsv\", \n            delim      = \"\\t\", \n            col_types  = col_types,\n            na         = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: id, type,\n#> number, country, date, abstract, title, kind, num_claims, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\nasignee_tbl <- vroom(\n            file       = \"C:/Users/sedit/Desktop/SadiR/ss23-bdsb-Sadtom98/content/01_journal/03_data_wrangling_/assignee.tsv\", \n            delim      = \"\\t\", \n            col_types  = col_types,\n            na         = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: number,\n#> country, date, abstract, title, kind, num_claims, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\nuspc_tbl <- vroom(\n            file       = \"C:/Users/sedit/Desktop/SadiR/ss23-bdsb-Sadtom98/content/01_journal/03_data_wrangling_/uspc.tsv\", \n            delim      = \"\\t\", \n            col_types  = col_types,\n            na         = c(\"\", \"NA\", \"NULL\")) %>%\n            transform(patent_id = as.character(patent_id))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: id, type,\n#> number, country, date, abstract, title, kind, num_claims, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\njoined_data <- asignee_tbl %>%\n  left_join(patent_asignee_tbl, by = c(\"id\" = \"assignee_id\")) %>%\n  left_join(patent_tbl, by = c(\"patent_id\" = \"id\")) %>%\n  left_join(uspc_tbl, by = \"patent_id\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: One or more parsing issues, call `problems()` on your data frame for details,\n#> e.g.:\n#>   dat <- vroom(...)\n#>   problems(dat)\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning in left_join(., uspc_tbl, by = \"patent_id\"): Detected an unexpected many-to-many relationship between `x` and `y`.\n#> ℹ Row 1 of `x` matches multiple rows in `y`.\n#> ℹ Row 376875 of `y` matches multiple rows in `x`.\n#> ℹ If a many-to-many relationship is expected, set `relationship =\n#>   \"many-to-many\"` to silence this warning.\n```\n:::\n:::\n\n\n# Answers to questions\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-2_bf2cd38d63d8a616f073098fd9e930a3'}\n\n```{.r .cell-code}\npatent_leaders <- sort(table(joined_data$organization), decreasing=T)[1:10] %>%\n  as.data.frame() %>%\n  mutate(Var1 = Var1 %>% str_to_title())\n\ndata.table(\n  \"Org\" = patent_leaders$Var1,\n  \"Patents\" = patent_leaders$Freq)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Org\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Patents\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"20669\"},{\"1\":\"Samsung Electronics Co., Ltd.\",\"2\":\"16002\"},{\"1\":\"Canon Kabushiki Kaisha\",\"2\":\"10276\"},{\"1\":\"Sony Corporation\",\"2\":\"9022\"},{\"1\":\"Microsoft Corporation\",\"2\":\"8113\"},{\"1\":\"Qualcomm Incorporated\",\"2\":\"7814\"},{\"1\":\"Kabushiki Kaisha Toshiba\",\"2\":\"7440\"},{\"1\":\"Google Inc.\",\"2\":\"6815\"},{\"1\":\"Lg Electronics Inc.\",\"2\":\"6292\"},{\"1\":\"Panasonic Corporation\",\"2\":\"6097\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nwrangled_august <- joined_data %>% \n  select(organization, date) %>%\n  filter(date >= \"2014-08-01\" & date <= \"2014-08-31\")\n\npatent_leaders_august <- sort(table(wrangled_august$organization), decreasing=T)[1:10] %>%\n  as.data.frame() %>%\n  mutate(Var1 = Var1 %>% str_to_title())\n\ndata.table(\n  \"Org\" = patent_leaders_august$Var1,\n  \"Patents\" = patent_leaders_august$Freq)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Org\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Patents\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"1990\"},{\"1\":\"Samsung Electronics Co., Ltd.\",\"2\":\"1361\"},{\"1\":\"Microsoft Corporation\",\"2\":\"876\"},{\"1\":\"Canon Kabushiki Kaisha\",\"2\":\"854\"},{\"1\":\"Sony Corporation\",\"2\":\"666\"},{\"1\":\"Qualcomm Incorporated\",\"2\":\"639\"},{\"1\":\"Google Inc.\",\"2\":\"627\"},{\"1\":\"Kabushiki Kaisha Toshiba\",\"2\":\"584\"},{\"1\":\"Apple Inc.\",\"2\":\"568\"},{\"1\":\"Hon Hai Precision Industry Co., Ltd.\",\"2\":\"546\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nwrangled_class <- joined_data %>%\n  select(organization, mainclass_id) %>%\n  filter(organization %in% patent_leaders$Var1[1:10]) %>% \n  subset(mainclass_id != \"No longer published\")\n\nclass_leaders <- sort(table(wrangled_class$mainclass_id), decreasing=T)[1:5] %>% \n  as.data.frame() %>%\n  mutate(Var1 = Var1 %>% str_to_title())\n\ndata.table(\n  \"Main class\" = class_leaders$Var1,\n  \"Patents\" = class_leaders$Freq)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Main class\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Patents\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"257\",\"2\":\"7710\"},{\"1\":\"438\",\"2\":\"3911\"},{\"1\":\"348\",\"2\":\"3848\"},{\"1\":\"709\",\"2\":\"3678\"},{\"1\":\"707\",\"2\":\"3089\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}